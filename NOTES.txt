

- frame: 'none' is the important line that gets rid of buttons

X- Working on apps is a bit of a pain. I think any time you change manifest.json or background.js, you need to remove and re-add the app to Chrome. (There's a small reload icon next to yoru app on chrome://extensions/)
- Chrome says it is going to deprecate apps and suggests PWA's instead. Can PWA's load with no close button + toolbars?



2022-03-17
- I can open a new chrome app window but don't know if it's possible for a webapp to postMessage to its parent 
- Iframes should be able to postMessage their parent but...
- iframes don't appear to work b/c Chrome won't let you relax the CSP for apps (but you can do it for extensions)
- So maybe I should make this an extension instead of an app...? Especially as apps are going away?


2022-03-18
- Chrome apps don't allow iframes but do allow webviews
- Fortunately webviews and their parent can communicate (even though it is slightly more complicated than iframes)
- Architecture
  - Chrome app background.js (grandparent) opens local parent. (Chrome insists parent must be local)
  - Parent has child webview that can be external webpage 
  - Magic can allow them all to communicate 

- Webviews' script files seem to be very cached. Need to add query string on end of script src. HTML seems to refresh fine though.



- Next 
  X- Maybe parent's scripts can also be served from website, meaning no updates needed ever (Not possible. Apps have very stict CSP settings. Extensions might be looser.)
  - drag handle 
  - Close, minimize, maximize 
  - How to pass messages to all windows and webviews 
  X- Programmtically show debugger (Not possible)
  X- Fix reload (You can reload everything with chrome.runtime.reload() or child with window.location.reload() but not parent or chrome.app.window.XXXX won't work.)
  X- Key command to reload (I'll wait for this.)
  
  - Learn extensions. See if it can overcome some of the problems below 
  - Learn PWAs. 
  - Can you open a Chrome App from a URL?
  - Clean up everything


2022-03-19
- Parents are very inconvenient 
  - Can't use onclick in HTML. Need to attach it from JS using addEventListener = awkward/inconvenient to code.
  - Not allowed to load non-local scripts in Apps
  - Drag bar only works in parent, not in child webview, so the toolbar with minimize, close, etc probably needs to be in parent.
  - More code in parent = more difficult to distribute updates 
  - Maybe extensions have less scrict CSP settings
- Iframes are allowed for manifests with  "manifest_version": 3
  - Very similar result to webview 
  - Results in 1 fewer Chrome debuggers that need to be opened 
  - Both have the problem where you press ctrl+R in the console, it reloads the parent, and chrome.app.window.xxxx stops working 
  - Unfortunatley v3 doesn't relax CSP to allow inline scripts or scripts pointing to external sources 








Interesting Termainal Commands
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --auto-open-devtools-for-tabs
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --new-window --app=https://www.mattbillard.com 








